function getRandomColor(){let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function hexToRgba(e){let t;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(e))return t=e.substring(1).split(""),3==t.length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t=`0x${t.join("")}`,`rgba(${[t>>16&255,t>>8&255,255&t].join(",")},0.1)`;console.error(`[Elections Widget] It was not possible to create an rgba color because the hex color '${e}' is not valid`)}function isInViewport(e){if(!e)return!1;const{left:t,right:o}=e.getBoundingClientRect(),{innerWidth:n}=window;return t-37>=0&&o+37<=n}function scrollHorizontally(e,t){let o=0;var n=setInterval((()=>{"left"==t?e.scrollLeft-=10:e.scrollLeft+=10,o+=10,o>=100&&window.clearInterval(n)}),25)}function debounce(e,t){let o=null;return function(){const n=this,r=arguments;clearTimeout(o),o=setTimeout((()=>{e.apply(n,r)}),t)}}function setScrollLogic(){const e=document.getElementById("election_results");if(!e)return;const t=document.querySelector(".arrow_left"),o=document.querySelector(".arrow_right"),n=e.parentNode;if(!t||!o)return;if(n.offsetWidth>=n.scrollWidth)return t.classList.add("remove"),void o.classList.add("remove");t.classList.remove("remove"),o.classList.remove("remove"),o.addEventListener("click",(()=>{scrollHorizontally(n,"right")})),t.addEventListener("click",(()=>{scrollHorizontally(n,"left")}));const r=e.querySelector(".person_data:first-child"),l=e.querySelector(".person_data:last-child");n.addEventListener("scroll",debounce((()=>{window.isInViewport(r)?t.classList.add("not_active"):t.classList.remove("not_active"),window.isInViewport(l)?o.classList.add("not_active"):o.classList.remove("not_active")}),10),{passive:!0})}function placeDataInHtml(){document.getElementById("election_results").replaceChildren();const e=document.getElementById("person_data_template");if(!e)return;const t=["bulj","jonjic","kartelo","kekin","lozo","milanovic","primorac","selak"],o={bulj:"Miro Bulj",jonjic:"Tomislav Jonjić",kartelo:"Niko Tokić Kartelo",kekin:"Ivana Kekin",lozo:"Branka Lozo",milanovic:"Zoran Milanović",primorac:"Dragan Primorac",selak:"Marija Selak Raspudić"},n=new DocumentFragment;for(let r=0;r<8;r++){const l=e.content.cloneNode(!0),a=l.querySelector(".percent"),c=(100*Math.random()).toFixed(2);a.innerText=`${c}%`;const s=l.querySelector(".graph"),i=getRandomColor(),d=hexToRgba(i);s.style.backgroundColor=d;const u=l.querySelector("span"),m=c/100*204;u.style.height=`${m}px`,u.style.backgroundColor=i;const f=l.querySelector("img");f.style.backgroundColor=d,f.style.backgroundImage="url()";const g=t[r],p=o[t[r]];f.src=`./static/images/${g}.png`,f.alt=p;l.querySelector(".name").innerText=p,n.appendChild(l)}document.getElementById("election_results").appendChild(n)}function setCss(){const e=new URLSearchParams(window.location.search).get("portal")?.toLowerCase();"24sata"===e?(document.documentElement.style.setProperty("--fontDefault","var(--font24sata)"),document.documentElement.style.setProperty("--fontTitleDefault","var(--fontTitle24sata)"),document.documentElement.style.setProperty("--titleFontWeightDefault","var(--titleFontWeight24sata)"),document.documentElement.style.setProperty("--backgroundDefault","var(--background24sata)")):"vl"===e?(document.documentElement.style.setProperty("--fontDefault","var(--fontVL)"),document.documentElement.style.setProperty("--fontTitleDefault","var(--fontTitleVL)"),document.documentElement.style.setProperty("--titleFontWeightDefault","var(--titleFontWeightVL)"),document.documentElement.style.setProperty("--backgroundDefault","var(--backgroundVL)")):console.info(`[Elections Widget] The font and color are not adjusted because the portal '${e}' is not recognized.`)}document.addEventListener("DOMContentLoaded",(()=>{setCss(),placeDataInHtml(),setScrollLogic();const e=document.querySelector(".loader_wrapper");e&&(e.style.display="none")})),window.addEventListener("resize",debounce((()=>{setScrollLogic()}),200));
